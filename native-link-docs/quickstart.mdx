---
title: 'Quickstart'
description: 'Build with NativeLink remote execution in 5 minutes'
---

## Setup your development

There are a few pre-requisites to get started if you do not use Docker to use NativeLink.

### Install or Update Rust

<CodeGroup>

```shell  Install
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

```shell Update
rustup update
```
</CodeGroup>

### Bazel Dependencies

* Bazel 6.4.0+
* Clang
* lld (exc. MacOS)
* python3
* curl

<CodeGroup>

```shell Linux
apt install -y gcc g++ lld python3 curl

sudo apt update && sudo apt install bazel

# Verify the installation.
bazel --version
```

```shell Docker-ARM
docker run -it --name=NL -v $(pwd):/native-link ubuntu:latest

# If above has already been run or trying to start in new terminal:
docker exec -it NL bash

apt update

apt install apt-transport-https curl gnupg

# Download the Bazel binary for ARM Linux.
curl -LO https://github.com/bazelbuild/bazel/releases/download/6.4.0/bazel-6.4.0-linux-arm64

# Make the binary executable.
chmod +x bazel-6.4.0-linux-arm64

# Move the binary to a directory in your PATH.
mv bazel-6.4.0-linux-arm64 /usr/local/bin/bazel

# Verify the installation.
bazel --version

```

```shell Docker-x86
docker run -it --name=NL -v $(pwd):/native-link ubuntu:latest

# If above has already been run or trying to start in new terminal:
docker exec -it NL bash

apt update

apt install apt-transport-https curl gnupg

# Download the Bazel binary for x86 Linux.
curl -LO https://github.com/bazelbuild/bazel/releases/download/6.4.0/bazel-6.4.0-linux-x86_64

# Make the binary executable.
chmod +x bazel-6.4.0-linux-x86_64

# Move the binary to a directory in your PATH.
mv bazel-6.4.0-linux-x86_64 /usr/local/bin/bazel

# Verify the installation.
bazel --version

```

```shell MacOS (Beta)
# It is recommended to use x86 Docker for Intel Macs and ARM Docker for Silicon Macs.
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

brew install bazel

# Verify the installation.
bazel --version
```

</CodeGroup>

<Note>The commands for creating docker containers can fill up space very quickly when run frequently. If `apt update` throws an out of space error you can run `docker system prune` to free up space. Be careful to make sure it's not removing any containers/images you want to keep.</Note>

### Compile and Run NativeLink Server

The following command will allow you to compile and run the NativeLink server for the first time.
  
  ```shell
  apt install -y gcc g++ lld python3
  # Install cargo (if needed).
  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
  source "$HOME/.cargo/env"

  # Run with Cargo:
  # Unoptimized development build
  cargo run --bin cas -- ./native-link-config/examples/basic_cas.json

  # Optimized release build
  cargo run --release --bin cas -- ./native-link-config/examples/basic_cas.json

  # Run with Bazel:
  # Unoptimized development build on Unix.
  bazel run cas -- ./native-link-config/examples/basic_cas.json

  # Optimized release build on Unix.
  bazel run -c opt cas -- ./native-link-config/examples/basic_cas.json
  ```

<Note>The `--release` flag causes link-time-optmization to be enabled, which can take a while to compile, but will result in a much faster binary.</Note>

In a seprate terminal, run the following command to start the NativeLink client.


```shell
bazel test //... \
  --remote_instance_name=main \
  --remote_cache=grpc://127.0.0.1:50051 \
  --remote_executor=grpc://127.0.0.1:50051 \
  --remote_default_exec_properties=cpu_count=1

  # This causes bazel to run the commands through an all-in-one `CAS`, `scheduler` 
  # and `worker`.
```
<Note>If the NativeLink server was run in a docker container, the above command for starting the NativeLink client will need to be run in the same container as the server in order to connect.</Note>

### Configuration

The `cas` executable reads a JSON file as it's only parameter. See [nativelink-config](./nativelink-config)
for more details and examples.

### Example Deployments

You can find a few example deployments in the [deployment-examples directory](./deployment-examples).

See the [terraform deployments](./deployment-examples/terraform) for an example
deployments that show off remote execution and cache capabilities.


### That's It!

NativeLink is now running and you can start using it in your projects.


## Advanced Setup


### Installing with Nix

**Installation requirements:**

* Nix with [flakes](https://nixos.wiki/wiki/Flakes) enabled

This build does not require cloning the repository, but you need to provide a
config file, for instance the one at [nativelink-config/examples/basic_cas.json](./nativelink-config/examples/basic_cas.json).

The following command builds and runs Native Link in release (optimized) mode:

```sh
nix run github:TraceMachina/nativelink ./basic_cas.json
```

For use in production pin the executable to a specific revision:

```sh
nix run github:TraceMachina/nativelink/<revision> ./basic_cas.json
```

### Using the OCI image

See the published [OCI images](https://github.com/TraceMachina/nativelink/pkgs/container/nativelink)
for pull commands.

Images are tagged by nix derivation hash. The most recently pushed image
corresponds to the `main` branch. Images are signed by the GitHub action that
produced the image. Note that the [OCI workflow](https://github.com/TraceMachina/nativelink/actions/workflows/image.yaml)
might take a few minutes to publish the latest image.

```sh
# Get the tag for the latest commit
export LATEST=$(nix eval github:TraceMachina/nativelink#image.imageTag --raw)

# Verify the signature
cosign verify ghcr.io/tracemachina/nativelink:${LATEST} \
    --certificate-identity=https://github.com/TraceMachina/nativelink/.github/workflows/image.yaml@refs/heads/main \
    --certificate-oidc-issuer=https://token.actions.githubusercontent.com
```

For use in production pin the image to a specific revision:

```sh
# Get the tag for a specific commit
export PINNED_TAG=$(nix eval github:TraceMachina/nativelink/<revision>#image.imageTag --raw)

# Verify the signature
cosign verify ghcr.io/tracemachina/nativelink:${PINNED_TAG} \
    --certificate-identity=https://github.com/TraceMachina/nativelink/.github/workflows/image.yaml@refs/heads/main \
    --certificate-oidc-issuer=https://token.actions.githubusercontent.com
```

<Tip> 
  The images are reproducible on `X86_64-unknown-linux-gnu`. If you're on 
  such a system you can produce a binary-identical image by building the 
  `.#image` flake output locally. Make sure that your `git status` is 
  completely clean and aligned with the commit you want to reproduce. 
  Otherwise the image will be tainted with a `"dirty"` revision label. 
</Tip>
